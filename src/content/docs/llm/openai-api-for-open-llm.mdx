---
title: "å¼€æºå¤§æ¨¡å‹å…¼å®¹Openaiæ¥å£"
description: "ä»‹ç»å¦‚ä½•é€šè¿‡ api-for-open-llm é¡¹ç›®éƒ¨ç½²å¹¶è°ƒç”¨å¼€æºå¤§æ¨¡å‹ï¼Œå®ç°ä¸ OpenAI API å…¼å®¹çš„åç«¯æ¥å£ã€‚"
---

æœ¬æ–‡ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ [api-for-open-llm](https://github.com/xusenlinzy/api-for-open-llm) é¡¹ç›®æ¥éƒ¨ç½²å’Œè°ƒç”¨å¼€æºå¤§å‹è¯­è¨€æ¨¡å‹ã€‚æ­¤é¡¹ç›®æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œä½¿å¾—å¼€æºæ¨¡å‹èƒ½ä»¥ä¸ OpenAI ChatGPT API ç±»ä¼¼çš„æ–¹å¼è¢«è°ƒç”¨ï¼Œå¹¶ä¸”æ”¯æŒæµå¼å“åº”ã€æ–‡æœ¬åµŒå…¥æ¨¡å‹ã€langchain å¼€å‘å·¥å…·ç­‰å¤šç§åŠŸèƒ½ã€‚

## ç‰¹æ€§æ¦‚è§ˆ

`api-for-open-llm` é¡¹ç›®å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼ˆå¤åˆ¶è‡ªå®˜ç½‘ï¼‰ï¼š

> - âœ¨ ä»¥ OpenAI ChatGPT API çš„æ–¹å¼è°ƒç”¨å„ç±»å¼€æºå¤§æ¨¡å‹
> - ğŸ–¨ï¸ æ”¯æŒæµå¼å“åº”ï¼Œå®ç°æ‰“å°æœºæ•ˆæœ
> - ğŸ“– å®ç°æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œä¸ºæ–‡æ¡£çŸ¥è¯†é—®ç­”æä¾›æ”¯æŒ
> - ğŸ¦œï¸ æ”¯æŒå¤§è§„æ¨¡è¯­è¨€æ¨¡å‹å¼€å‘å·¥å…· langchain çš„å„ç±»åŠŸèƒ½
> - ğŸ™Œ åªéœ€è¦ç®€å•çš„ä¿®æ”¹ç¯å¢ƒå˜é‡å³å¯å°†å¼€æºæ¨¡å‹ä½œä¸º chatgpt çš„æ›¿ä»£æ¨¡å‹ï¼Œä¸ºå„ç±»åº”ç”¨æä¾›åç«¯æ”¯æŒ
> - ğŸš€ æ”¯æŒåŠ è½½ç»è¿‡è‡ªè¡Œè®­ç»ƒè¿‡çš„ lora æ¨¡å‹
> - âš¡ æ”¯æŒ vLLM æ¨ç†åŠ é€Ÿå’Œå¤„ç†å¹¶å‘è¯·æ±‚

## ä½¿ç”¨æ­¥éª¤

import { Steps } from '@astrojs/starlight/components';

<Steps>

1. **å…‹éš†ä»“åº“å¹¶è¿›å…¥ç›®å½•**

    é¦–å…ˆï¼Œæ‚¨éœ€è¦ä» GitHub å…‹éš† `api-for-open-llm` ä»“åº“åˆ°æœ¬åœ°ï¼Œå¹¶è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
    
    ```bash
    git clone https://github.com/xusenlinzy/api-for-open-llm.git
    cd api-for-open-llm
    ```

2. **å®‰è£…ä¾èµ–**
    
    ```bash
    pip install -r requirements.txt
    ```

3. **é…ç½®ç¯å¢ƒå˜é‡**

    å¤åˆ¶ `.env.example` æ–‡ä»¶ä¸º `.env`ï¼Œç„¶åæ ¹æ®éœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼š
    
    ```bash
    cp .env.example .env
    ```

4. **å¯åŠ¨æœåŠ¡**

    å°† `server.py` æ–‡ä»¶å¤åˆ¶åˆ°å½“å‰ç›®å½•ï¼Œå¹¶ä½¿ç”¨ Python å¯åŠ¨æœåŠ¡ï¼š
    
    ```bash
    cp api/server.py .
    python server.py
    ```

</Steps>

## ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹

1. **Qwen æ¨¡å‹é…ç½®**

    ```yml
    MODEL_NAME=qwen
    MODEL_PATH=Qwen/Qwen-14B-Chat-Int4
    DEVICE_MAP=auto
    ```

2. **Yi-Chat æ¨¡å‹é…ç½®**

    ```yaml
    MODEL_NAME=yi-chat
    MODEL_PATH=01-ai/Yi-34B-Chat
    PROMPT_NAME=yi
    DEVICE_MAP=auto
    ```

## æ¨¡å‹è°ƒç”¨

```python
openai_api_key="xxx",                     # å¯ä»¥ä»»æ„å¡«å†™
openai_api_base="http://ip:8000/v1",      # .env æ–‡ä»¶ä¸­é…ç½®çš„ç«¯å£
```